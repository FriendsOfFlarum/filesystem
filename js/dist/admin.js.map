{"version":3,"sources":["webpack://@fof/filesystem/webpack/bootstrap","webpack://@fof/filesystem/./admin.js","webpack://@fof/filesystem/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/filesystem/./src/admin/addFilesystemPane.js","webpack://@fof/filesystem/./src/admin/components/AdapterCard.js","webpack://@fof/filesystem/./src/admin/components/AdapterSettingsModal.js","webpack://@fof/filesystem/./src/admin/components/FilesystemPage.js","webpack://@fof/filesystem/./src/admin/components/RequiredPackageModal.js","webpack://@fof/filesystem/./src/admin/components/RequirementCard.js","webpack://@fof/filesystem/./src/admin/components/RequirementSettingModal.js","webpack://@fof/filesystem/./src/admin/index.js","webpack://@fof/filesystem/external \"flarum.core.compat['Component']\"","webpack://@fof/filesystem/external \"flarum.core.compat['app']\"","webpack://@fof/filesystem/external \"flarum.core.compat['components/AdminLinkButton']\"","webpack://@fof/filesystem/external \"flarum.core.compat['components/AdminNav']\"","webpack://@fof/filesystem/external \"flarum.core.compat['components/Button']\"","webpack://@fof/filesystem/external \"flarum.core.compat['components/Dropdown']\"","webpack://@fof/filesystem/external \"flarum.core.compat['components/Modal']\"","webpack://@fof/filesystem/external \"flarum.core.compat['components/Page']\"","webpack://@fof/filesystem/external \"flarum.core.compat['components/Select']\"","webpack://@fof/filesystem/external \"flarum.core.compat['components/SettingsModal']\"","webpack://@fof/filesystem/external \"flarum.core.compat['components/Switch']\"","webpack://@fof/filesystem/external \"flarum.core.compat['extend']\"","webpack://@fof/filesystem/external \"flarum.core.compat['helpers/icon']\"","webpack://@fof/filesystem/external \"flarum.core.compat['utils/ItemList']\"","webpack://@fof/filesystem/external \"flarum.core.compat['utils/saveSettings']\""],"names":["app","routes","fof_filesystem","path","component","extensionSettings","m","route","extend","prototype","items","add","href","icon","children","translator","trans","description","AdapterCard","init","adapter","props","available","enabled","view","controls","settingsModal","isEmpty","toArray","toggle","bind","onclick","modal","show","current","adaptersEnabled","foundAt","indexOf","splice","push","saveSettings","filter","tmp","length","join","AdapterSettingsModal","name","rules","title","form","fields","buildFields","key","field","split","rule","className","isRequired","translations","fieldTranslatorKey","stringField","id","fieldName","bidi","setting","required","intField","type","boolField","state","onchange","FilesystemPage","adapters","data","settings","requested","icons","requestedList","adaptersList","requiredCards","adapterCards","i","config","RequiredPackageModal","content","dependency","package","RequirementCard","driver","extension","RequirementSettingModal","installed","public","options","value","default","initializers","addFilesystemPane"],"mappings":"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","file":"admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./admin.js\");\n","export * from './src/admin';","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import { extend } from 'flarum/extend';\nimport AdminNav from 'flarum/components/AdminNav';\nimport AdminLinkButton from 'flarum/components/AdminLinkButton';\n\nimport FilesystemPage from './components/FilesystemPage';\n\nexport default function() {\n  app.routes.fof_filesystem = {path: '/fof-filesystem', component: FilesystemPage.component()};\n\n  app.extensionSettings['fof-filesystem'] = () => m.route(app.route('fof_filesystem'));\n\n  extend(AdminNav.prototype, 'items', items => {\n    items.add('fof_filesystem', AdminLinkButton.component({\n      href: app.route('fof_filesystem'),\n      icon: 'fas fa-boxes',\n      children: app.translator.trans('fof-filesystem.admin.nav.label'),\n      description: app.translator.trans('fof-filesystem.admin.nav.description')\n    }));\n  });\n}\n","import Component from 'flarum/Component';\nimport ItemList from \"flarum/utils/ItemList\";\nimport Dropdown from \"flarum/components/Dropdown\";\nimport Button from 'flarum/components/Button';\nimport AdapterSettingsModal from './AdapterSettingsModal';\nimport RequiredPackageModal from './RequiredPackageModal';\nimport icon from 'flarum/helpers/icon';\nimport saveSettings from 'flarum/utils/saveSettings';\n\nexport default class AdapterCard extends Component {\n    init() {\n        this.adapter = this.props.adapter;\n        this.icon = this.props.icon;\n        this.available = !!this.adapter['installed'];\n        this.enabled = !!this.adapter['enabled'];\n    }\n\n    view() {\n        const controls = this.controls();\n\n        return <li className={'ExtensionListItem ' + (!this.available ? 'disabled' : '')}>\n            <div className=\"ExtensionListItem-content\">\n                      <span className=\"ExtensionListItem-icon ExtensionIcon\" onclick={() => this.available ? this.settingsModal() : null}>\n                          {icon(this.icon)}\n                      </span>\n                {!controls.isEmpty() ? (\n                    <Dropdown\n                        className=\"ExtensionListItem-controls\"\n                        buttonClassName=\"Button Button--icon Button--flat\"\n                        menuClassName=\"Dropdown-menu--right\"\n                        icon=\"fas fa-ellipsis-h\">\n                        {controls.toArray()}\n                    </Dropdown>\n                ) : ''}\n                <label className=\"ExtensionListItem-title\">\n                    <input type=\"checkbox\" checked={this.enabled} onclick={this.toggle.bind(this, this.adapter['name'])}/> {' '}\n                    {app.translator.trans('fof-filesystem.admin.adapters.' + this.adapter['name'])}\n                </label>\n            </div>\n        </li>;\n    }\n\n    controls() {\n        const items = new ItemList;\n\n        if (! this.available) {\n            items.add('required-package', Button.component({\n                icon: 'fas fa-cogs',\n                children: app.translator.trans('fof-fileysystem.admin.button.required_package'),\n                onclick: () => app.modal.show(RequiredPackageModal,{\n                    adapter: this.adapter\n                })\n            }));\n\n            return items;\n        }\n\n        items.add('settings', Button.component({\n            icon: 'fas fa-cogs',\n            children: app.translator.trans('fof-filesystem.admin.button.settings'),\n            onclick: () => this.settingsModal()\n        }));\n\n        return items;\n    }\n\n    settingsModal() {\n        app.modal.show(AdapterSettingsModal, {\n            adapter: this.adapter\n        });\n    }\n\n    toggle(adapter) {\n        const current = this.adaptersEnabled();\n        const foundAt = current.indexOf(adapter);\n\n        // found\n        if (foundAt >= 0) {\n            current.splice(foundAt, 1);\n        } else {\n            current.push(adapter);\n        }\n\n        this.adaptersEnabled(current);\n        saveSettings({\n            'fof-filesystem.adapters.enabled': current.filter(tmp => tmp.length > 0).join(',')\n        });\n    }\n}\n","import app from 'flarum/app';\nimport SettingsModal from 'flarum/components/SettingsModal';\nimport Switch from 'flarum/components/Switch';\nimport ItemList from \"flarum/utils/ItemList\";\n\nexport default class AdapterSettingsModal extends SettingsModal {\n    init() {\n        super.init();\n\n        this.adapter = this.props.adapter.name;\n        this.rules = this.props.adapter.rules;\n    }\n\n    title() {\n        return app.translator.trans('fof-filesystem.admin.adapter-settings-modal.title', {adapter: this.adapter});\n    }\n\n    form() {\n        const fields = this.buildFields();\n\n        return fields.toArray();\n    }\n\n    buildFields() {\n        const items = new ItemList;\n\n        for(const key in this.rules) {\n            let field = null;\n\n            const rules = this.rules[key].split('|');\n\n            for (let rule of rules) {\n                if (! field && rule + 'Field' in this) {\n                    field = this[rule + 'Field'](key, rules);\n                }\n            }\n\n            if (field) {\n                items.add(key,\n                    m('div', { className: 'Form-group ' + (this.isRequired(rules) ? 'required' : '') }, [\n                        app.translator.translations[this.fieldTranslatorKey(key, 'label')] ?\n                            m('label', {}, app.translator.trans(this.fieldTranslatorKey(key, 'label'))) : '',\n                        field,\n                        m('span', app.translator.trans(this.fieldTranslatorKey(key, 'description')))\n                    ]));\n            }\n        }\n\n        return items;\n    }\n\n    stringField(key, rules) {\n        return m('input', {\n            id: this.fieldName(key),\n            className: 'FormControl',\n            bidi: this.setting(this.fieldName(key)),\n            required: this.isRequired(rules)\n        });\n    }\n\n    intField(key, rules) {\n        return m('input', {\n            id: this.fieldName(key),\n            type: \"number\",\n            className: 'FormControl',\n            bidi: this.setting(this.fieldName(key))\n        });\n    }\n\n    boolField(key, rules) {\n        return Switch.component({\n            state: this.setting(this.fieldName(key))(),\n            onchange: this.setting(this.fieldName(key)),\n            children: app.translator.trans(this.fieldTranslatorKey(key, 'toggle'))\n        });\n    }\n\n    isRequired(rules) {\n        return rules.indexOf('required') >= 0;\n    }\n\n    fieldTranslatorKey(key, type) {\n        return 'fof-filesystem.admin.settings.' + this.adapter + '.' + key + '.' + type;\n    }\n\n    fieldName(key) {\n        return 'fof-filesystem.admin.settings.' + this.adapter + '.' + key;\n    }\n}\n","import Page from 'flarum/components/Page';\nimport AdapterCard from \"./AdapterCard\";\nimport RequirementCard from \"./RequirementCard\";\n\nexport default class FilesystemPage extends Page {\n    init() {\n        super.init();\n\n        this.adapters = app.data.settings['fof-filesystem-adapters'] || {};\n        this.requested = app.data.settings['fof-filesystem-requirements'] || {};\n\n        // Only needed in UX, so lets hack it in.\n        this.icons = {\n            'local': 'fas fa-hdd',\n            'aliyun': null,\n            'azure': 'fab fa-microsoft',\n            'aws' : 'fab fa-aws',\n            'dospaces': 'fab fa-digital-ocean',\n            'dropbox': 'fab fa-dropbox',\n            'ftp': null,\n            'gridfs': null,\n            'rackspace': null,\n            'sftp': null,\n            'webdav': null\n        };\n    }\n    view() {\n        return m('div', {className: 'FilesystemsPage'}, [\n          m('div', {className: 'container'}, [\n            m('h3', {}, app.translator.trans('fof-filesystem.admin.requested-list')),\n            this.requestedList(),\n            m('h3', {}, app.translator.trans('fof-filesystem.admin.adapters-list')),\n            this.adaptersList()\n          ])\n        ]);\n    }\n\n    requestedList() {\n      return m('div', {className: 'ExtensionsPage-list'}, m('div', {className: 'container'},\n        m('ul', {className: 'Requirement ExtensionList'}, this.requiredCards())\n      ));\n    }\n\n    requiredCards() {\n      const items = [];\n\n      for (let requested of this.requested) {\n        items.push(RequirementCard.component({requested, adapters: this.adapters}))\n      }\n\n      return items;\n    }\n\n    adaptersList() {\n        return m('div', {className: 'ExtensionsPage-list'}, m('div', {className: 'container'},\n            m('ul', {className: 'Adapters ExtensionList'}, this.adapterCards())\n        ));\n    }\n\n    adapterCards() {\n        const items = [];\n\n        for (let i in this.adapters) {\n            const adapter = this.adapters[i];\n            const icon = adapter['icon'] || this.icons[adapter['name']] || 'fas fa-archive';\n\n            items.push(AdapterCard.component({adapter, icon}));\n        }\n\n        return items;\n    }\n\n    config() {\n    }\n}\n","import app from 'flarum/app';\nimport Modal from 'flarum/components/Modal';\n\nexport default class RequiredPackageModal extends Modal {\n    init() {\n        super.init();\n\n        this.adapter = this.props.adapter;\n    }\n    title() {\n        return app.translator.trans('fof-filesystem.admin.required-package-modal.title', {adapter: this.adapter});\n    }\n    content() {\n        const dependency = app.translator.trans('fof-filesystem.admin.you-need-for.' + this.adapter);\n\n        return <div className=\"Modal-body\">\n            {app.translator.trans('fof-filesystem.admin.required-package-modal.content', {package: dependency})}\n        </div>;\n    }\n}\n","import Component from 'flarum/Component';\nimport ItemList from \"flarum/utils/ItemList\";\nimport Dropdown from \"flarum/components/Dropdown\";\nimport Button from 'flarum/components/Button';\nimport icon from 'flarum/helpers/icon';\nimport saveSettings from 'flarum/utils/saveSettings';\nimport RequirementSettingModal from \"./RequirementSettingModal\";\n\nexport default class RequirementCard extends Component {\n    init() {\n        this.requested = this.props.requested;\n        // @todo if matched with an active driver, mark it enabled\n        this.driver = false;\n    }\n\n    view() {\n        const controls = this.controls();\n\n        return <li className={'ExtensionListItem '}>\n            <div className=\"ExtensionListItem-content\">\n                <span className=\"ExtensionListItem-icon ExtensionIcon\" style={this.requested.icon} onClick={() => this.settingsModal()}>\n                  {this.requested.icon ? icon(this.requested.icon.name) : ''}\n                </span>\n                {!controls.isEmpty() ? (\n                    <Dropdown\n                        className=\"ExtensionListItem-controls\"\n                        buttonClassName=\"Button Button--icon Button--flat\"\n                        menuClassName=\"Dropdown-menu--right\"\n                        icon=\"fas fa-ellipsis-h\">\n                        {controls.toArray()}\n                    </Dropdown>\n                ) : ''}\n                <label className=\"ExtensionListItem-title\">\n                    <input type=\"checkbox\" checked={this.driver} disabled/>\n                    {' '}{this.requested.extension ? this.requested.extension + ': ' : ''}{this.requested.title}\n                    {this.requested.description ? <div>{this.requested.description }</div> : ''}\n                </label>\n            </div>\n        </li>;\n    }\n\n    controls() {\n        const items = new ItemList;\n\n        items.add('settings', Button.component({\n          icon: 'fas fa-cogs',\n          children: app.translator.trans('fof-filesystem.admin.button.settings'),\n          onclick: () => this.settingsModal()\n        }));\n\n        return items;\n    }\n\n    settingsModal() {\n        app.modal.show(RequirementSettingModal, {\n          requested: this.requested,\n          adapters: this.props.adapters\n        });\n    }\n\n    toggle(adapter) {\n        // const current = this.adaptersEnabled();\n        // const foundAt = current.indexOf(adapter);\n        //\n        // // found\n        // if (foundAt >= 0) {\n        //     current.splice(foundAt, 1);\n        // } else {\n        //     current.push(adapter);\n        // }\n        //\n        // this.adaptersEnabled(current);\n        // saveSettings({\n        //     'fof-filesystem.adapters.enabled': current.filter(tmp => tmp.length > 0).join(',')\n        // });\n    }\n}\n","import app from 'flarum/app';\nimport SettingsModal from 'flarum/components/SettingsModal';\nimport ItemList from \"flarum/utils/ItemList\";\nimport Select from 'flarum/components/Select';\n\nexport default class RequirementSettingModal extends SettingsModal {\n  init() {\n    super.init();\n\n    this.requested = this.props.requested;\n    this.adapters = {};\n    for (let adapter of this.props.adapters) {\n      if (! adapter.installed) {\n        continue;\n      }\n      if (this.requested.public === true && adapter.public === false) {\n        continue;\n      }\n      this.adapters[adapter.name] = app.translator.trans('fof-filesystem.admin.adapters.' + adapter.name);\n    }\n  }\n  title() {\n    return app.translator.trans('fof-filesystem.admin.requested-driver-modal.title', {requested: this.requested.title});\n  }\n\n\n  form() {\n    const fields = this.buildFields();\n\n    return fields.toArray();\n  }\n\n  buildFields() {\n    const items = new ItemList;\n\n    items.add('adapter',\n      m('div', { className: 'Form-group' }, [\n        m('label', {}, app.translator.trans('fof-filesystem.admin.requested-driver-modal.adapter')),\n        Select.component({\n          options: this.adapters,\n          value: this.requested.default\n        }),\n      ])\n    );\n\n    return items;\n  }\n}\n","import addFilesystemPane from './addFilesystemPane';\n\napp.initializers.add('fof-filesystem', app => {\n  addFilesystemPane();\n});\n","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/AdminLinkButton'];","module.exports = flarum.core.compat['components/AdminNav'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/Select'];","module.exports = flarum.core.compat['components/SettingsModal'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/saveSettings'];"],"sourceRoot":""}